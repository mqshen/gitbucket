ALTER TABLE `REPOSITORY` ADD COLUMN `ORIGIN_USER_NAME` VARCHAR(100);
ALTER TABLE `REPOSITORY` ADD COLUMN `ORIGIN_REPOSITORY_NAME` VARCHAR(100);
ALTER TABLE `REPOSITORY` ADD COLUMN `PARENT_USER_NAME` VARCHAR(100);
ALTER TABLE `REPOSITORY` ADD COLUMN `PARENT_REPOSITORY_NAME` VARCHAR(100);

CREATE TABLE IF NOT EXISTS `PULL_REQUEST`(
    `USER_NAME`     VARCHAR(100) NOT NULL,
	`REPOSITORY_NAME`  VARCHAR(100) NOT NULL,
	`ISSUE_ID` INT NOT NULL,
	`BRANCH` VARCHAR(100) NOT NULL,
	`REQUEST_USER_NAME` VARCHAR(100) NOT NULL,
	`REQUEST_REPOSITORY_NAME` VARCHAR(100) NOT NULL,
	`REQUEST_BRANCH` VARCHAR(100) NOT NULL,
	`COMMIT_ID_FROM` VARCHAR(40) NOT NULL,
	`COMMIT_ID_TO` VARCHAR(40) NOT NULL,
	PRIMARY KEY (USER_NAME, REPOSITORY_NAME, ISSUE_ID),
    CONSTRAINT `IDX_PULL_REQUEST_FK0` FOREIGN KEY (`USER_NAME`, `REPOSITORY_NAME`, `ISSUE_ID`) REFERENCES `ISSUE` (`USER_NAME`, `REPOSITORY_NAME`, `ISSUE_ID`)
);

ALTER TABLE `ISSUE` ADD COLUMN `PULL_REQUEST` BOOLEAN NOT NULL DEFAULT FALSE;
